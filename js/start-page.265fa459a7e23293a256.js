!function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={value:"day"},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;return"CHANGE_THEME"===t.type?o(o({},e),{},{value:t.payload}):e},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?(localStorage.setItem(e,JSON.stringify(t)),e):JSON.parse(localStorage.getItem(e))||"day"};function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$page=r,this.store=function(e){var r=e(t({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{type:"__INIT__"}),n=[];return{dispatchEvent:function(t){r=e(r,t),n.forEach((function(e){return e(r)}))},subscribe:function(e){n.push(e)},getState:function(){return r}}}(l,c("theme")),this.init()}var r,n;return r=e,n=[{key:"init",value:function(){var e=this;if(this.toggleStartPage=this.$page.querySelector(".js-start-page__toggle"),!this.toggleStartPage)throw new Error("MenuWidget: Toggle is not defined");this.toggleInput=this.toggleStartPage.querySelector(".js-toggle__input"),this.dayToggleTitle=this.toggleStartPage.querySelector(".js-toggle-title"),this.startPageStyle=this.$page.style,this.menuTextColor=this.$page.querySelectorAll(".js-menu-widget__text"),this.logo=this.$page.querySelector(".js-logo"),this.logoTextColor=this.$page.querySelectorAll(".js-logo__letter"),this.store.subscribe((function(t){c("theme",t.value),e.theme(c("theme"))})),this.store.dispatchEvent({type:"INIT_APPLICATION"}),this.toggle()}},{key:"toggle",value:function(){this.toggleStartPage.addEventListener("change",this.handleToggleChange.bind(this))}},{key:"themeTextColor",value:function(e){var t="day"===e?"#1F2041":"#66d2ea";this.menuTextColor.forEach((function(e){e.style.color="".concat(t)})),this.logoTextColor.forEach((function(e){e.setAttribute("fill","".concat(t))}))}},{key:"day",value:function(){this.dayToggleTitle.textContent="День",this.dayToggleTitle.style.color="#c7c7d0",this.startPageStyle.background="#fff",this.themeTextColor("day")}},{key:"night",value:function(){this.dayToggleTitle.textContent="Ночь",this.dayToggleTitle.style.color="#BC9CFF",this.startPageStyle.background="#1D1E33",this.toggleInput.checked=!0,this.themeTextColor("night")}},{key:"theme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"day";"day"===e?this.day():this.night()}},{key:"handleToggleChange",value:function(){var e="День"===this.dayToggleTitle.textContent?"night":"day";this.store.dispatchEvent({type:"CHANGE_THEME",payload:e})}}],n&&g(r.prototype,n),e}(),u=s;document.querySelector(".start-page")&&new u(document.body)}();